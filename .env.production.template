# ========================================
# CONFIGURAZIONE PRODUZIONE AIVIDEMAKER
# ========================================
# IMPORTANTE: Questo è un TEMPLATE. Copia in .env.production e compila.
# NON committare MAI .env.production su Git!

# ==================== SECURITY ====================
# IMPORTANTE: Genera una SECRET_KEY NUOVA per produzione (mai riutilizzare quella di sviluppo!)
# Genera con: python -c "import secrets; print(secrets.token_urlsafe(48))"
SECRET_KEY=INSERISCI_QUI_SECRET_KEY_PRODUZIONE_64_CARATTERI

# ==================== ENVIRONMENT ====================
ENVIRONMENT=production
DEBUG=false

# ==================== DATABASE ====================
# PostgreSQL per produzione (OBBLIGATORIO - non usare SQLite!)
# Formato: postgresql://username:password@host:5432/database_name
# Esempio DigitalOcean: postgresql://doadmin:PASSWORD@db-postgresql-nyc1-12345.ondigitalocean.com:25060/aivideomaker?sslmode=require
DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/aivideomaker

# ==================== PATHS ====================
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
OUTPUT_DIR=/var/www/aivideomaker/output
UPLOAD_DIR=/var/www/aivideomaker/uploads
TEMP_DIR=/var/www/aivideomaker/temp

# ==================== API ====================
API_PREFIX=/api/v1

# ==================== GOOGLE OAUTH 2.0 (LOGIN CON GOOGLE) ====================
# IMPORTANTE: Devi creare NUOVE credenziali OAuth per produzione!
# 1. Vai a https://console.cloud.google.com/apis/credentials
# 2. Crea NUOVO "ID client OAuth 2.0" per PRODUZIONE
# 3. Tipo: "Applicazione web"
# 4. URI di reindirizzamento autorizzati: https://TUODOMINIO.com/api/v1/auth/google/callback
# 5. Origini JavaScript autorizzate: https://TUODOMINIO.com
GOOGLE_CLIENT_ID=INSERISCI_CLIENT_ID_PRODUZIONE
GOOGLE_CLIENT_SECRET=INSERISCI_CLIENT_SECRET_PRODUZIONE
GOOGLE_REDIRECT_URI=https://TUODOMINIO.com/api/v1/auth/google/callback

# ==================== EXTERNAL API KEYS ====================

# OpenAI API Key (NECESSARIA per generazione miniature AI e SEO metadata)
# IMPORTANTE: Verifica limiti rate e billing su https://platform.openai.com/usage
OPENAI_API_KEY=INSERISCI_OPENAI_KEY_PRODUZIONE

# ElevenLabs API Key (NECESSARIA per dubbing video con lip-sync)
# IMPORTANTE: Verifica piano subscription e limiti caratteri su https://elevenlabs.io/usage
ELEVENLABS_API_KEY=INSERISCI_ELEVENLABS_KEY_PRODUZIONE

# ==================== CORS (CROSS-ORIGIN RESOURCE SHARING) ====================
# Lista domini autorizzati per richieste cross-origin (separati da virgola)
# IMPORTANTE: NON usare "*" in produzione! Specifica SOLO domini reali.
# Esempio: https://tuodominio.com,https://www.tuodominio.com,https://app.tuodominio.com
CORS_ORIGINS=https://TUODOMINIO.com

# ==================== SERVER ====================
# Host e porta per Uvicorn (usa 127.0.0.1 se dietro Nginx reverse proxy)
HOST=127.0.0.1
PORT=8000

# Workers per Uvicorn (numero consigliato: 2 * CPU cores + 1)
# Esempio: Server con 2 CPU → WORKERS=5
WORKERS=4

# ==================== LOGGING ====================
# Livello log produzione (usa "INFO" o "WARNING", mai "DEBUG")
LOG_LEVEL=INFO

# Path file log (assicurati che la directory esista)
LOG_FILE=/var/log/aivideomaker/app.log

# ==================== RATE LIMITING ====================
# Limiti richieste per prevenire abusi
# Formato: numero_richieste/secondi
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# ==================== SECURITY HEADERS ====================
# HSTS max age (1 anno = 31536000 secondi)
HSTS_MAX_AGE=31536000

# Content Security Policy
# IMPORTANTE: Personalizza in base ai CDN/servizi esterni che usi
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline' https://accounts.google.com
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_FONT_SRC='self' data:

# ==================== BACKUP ====================
# Path backup database automatici
BACKUP_DIR=/var/backups/aivideomaker
BACKUP_RETENTION_DAYS=30

# ==================== MONITORING ====================
# Sentry DSN (opzionale, per error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ========================================
# CHECKLIST DEPLOYMENT PRODUZIONE:
# ========================================
# [ ] SECRET_KEY generata NUOVA (mai riutilizzare quella di dev!)
# [ ] Database PostgreSQL configurato e testato
# [ ] Google OAuth credenziali NUOVE create per dominio produzione
# [ ] GOOGLE_REDIRECT_URI aggiornato con dominio reale HTTPS
# [ ] CORS_ORIGINS configurato con SOLO domini reali (no "*")
# [ ] DEBUG=false (OBBLIGATORIO!)
# [ ] ENVIRONMENT=production
# [ ] Nginx configurato come reverse proxy
# [ ] Certificato SSL/TLS installato (Let's Encrypt)
# [ ] Firewall configurato (solo 80, 443, 22)
# [ ] Directory output/uploads/temp con permessi corretti (www-data)
# [ ] Backup database automatici configurati
# [ ] Log rotation configurato (/etc/logrotate.d/)
# [ ] Monitoring configurato (Uptime Robot, Sentry, etc.)
# [ ] Rate limiting testato
# [ ] HTTPS forzato su tutte le route
# [ ] file .env.production NON committato su Git!

# ========================================
# COMANDI DEPLOYMENT RAPIDO:
# ========================================
# 1. Copia questo file: cp .env.production.template .env.production
# 2. Compila tutti i valori INSERISCI_QUI_*
# 3. Test validazione: python -c "from app.core.config import settings; print(settings)"
# 4. Avvia con: gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app --bind 127.0.0.1:8000
# 5. Verifica health: curl https://tuodominio.com/health
